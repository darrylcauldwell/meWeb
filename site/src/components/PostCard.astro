---
import { categoryLabels, getCategoryColor } from '../config/colors';

interface Props {
  title: string;
  description?: string;
  date: string;
  category?: string;
  slug: string;
}

const { title, description, date, category = 'automation', slug } = Astro.props;

const formattedDate = new Date(date).toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});

const categoryColor = getCategoryColor(category);
---

<article class="card p-6 group relative overflow-hidden">
  <!-- Category color accent bar -->
  <div
    class="absolute left-0 top-0 bottom-0 w-1 transition-all duration-300 group-hover:w-1.5"
    style={`background-color: ${categoryColor};`}
  ></div>

  <a href={`/post/${slug}/`} class="block pl-4">
    <div class="flex items-center gap-3 mb-3">
      <span
        class="px-2 py-0.5 text-[var(--color-dark)] rounded text-xs font-semibold"
        style={`background-color: ${categoryColor};`}
      >
        {categoryLabels[category] || category}
      </span>
      <time datetime={date} class="text-xs text-[var(--color-text-muted)]">
        {formattedDate}
      </time>
    </div>

    <h2
      class="text-xl font-semibold text-[var(--color-heading)] transition-colors mb-2"
      style={`--hover-color: ${categoryColor};`}
    >
      <span class="group-hover:text-[var(--hover-color)] transition-colors">
        {title}
      </span>
    </h2>

    {description && (
      <p class="text-[var(--color-text)] text-sm line-clamp-2">
        {description}
      </p>
    )}
  </a>
</article>
